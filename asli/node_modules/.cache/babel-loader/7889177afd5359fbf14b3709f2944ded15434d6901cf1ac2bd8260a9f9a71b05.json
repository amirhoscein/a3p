{"ast":null,"code":"import _slicedToArray from\"D:/React tamrin/a3P/asli/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _toConsumableArray from\"D:/React tamrin/a3P/asli/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"D:/React tamrin/a3P/asli/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useReducer,createContext}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";var initialState={selectedItems:[],itemsCounter:0,total:0,checkout:false};var sumItems=function sumItems(items){var itemsCounter=items.reduce(function(total,product){return total+product.quantity;},0);var total=items.reduce(function(total,product){return total+product.price*product.quantity;},0).toFixed(2);return{itemsCounter:itemsCounter,total:total};};var cartReducer=function cartReducer(state,action){console.log(state);switch(action.type){case\"ADD_ITEM\":if(!state.selectedItems.find(function(item){return item.id===action.payload.id;})){state.selectedItems.push(_objectSpread(_objectSpread({},action.payload),{},{quantity:1}));}return _objectSpread(_objectSpread(_objectSpread({},state),{},{selectedItems:_toConsumableArray(state.selectedItems)},sumItems(state.selectedItems)),{},{checkout:false});case\"REMOVE_ITEM\":var newSelectedItems=state.selectedItems.filter(function(item){return item.id!==action.payload.id;});return _objectSpread(_objectSpread({},state),{},{selectedItems:_toConsumableArray(newSelectedItems)},sumItems(newSelectedItems));case\"INCREASE\":var indexI=state.selectedItems.findIndex(function(item){return item.id===action.payload.id;});state.selectedItems[indexI].quantity++;return _objectSpread(_objectSpread({},state),sumItems(state.selectedItems));case\"DECREASE\":var indexD=state.selectedItems.findIndex(function(item){return item.id===action.payload.id;});state.selectedItems[indexD].quantity--;return _objectSpread(_objectSpread({},state),sumItems(state.selectedItems));case\"CHECKOUT\":return{selectedItems:[],itemsCounter:0,total:0,checkout:true};case\"CLEAR\":return{selectedItems:[],itemsCounter:0,total:0,checkout:false};default:return state;}};export var CartContext=/*#__PURE__*/createContext();var CartContextProvider=function CartContextProvider(_ref){var children=_ref.children;var _useReducer=useReducer(cartReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];return/*#__PURE__*/_jsx(CartContext.Provider,{value:{state:state,dispatch:dispatch},children:children});};export default CartContextProvider;","map":{"version":3,"names":["React","useReducer","createContext","jsx","_jsx","initialState","selectedItems","itemsCounter","total","checkout","sumItems","items","reduce","product","quantity","price","toFixed","cartReducer","state","action","console","log","type","find","item","id","payload","push","_objectSpread","_toConsumableArray","newSelectedItems","filter","indexI","findIndex","indexD","CartContext","CartContextProvider","_ref","children","_useReducer","_useReducer2","_slicedToArray","dispatch","Provider","value"],"sources":["D:/React tamrin/a3P/asli/src/context/CartContextProvider.js"],"sourcesContent":["import React, { useReducer, createContext } from \"react\";\r\n\r\nconst initialState = {\r\n  selectedItems: [],\r\n  itemsCounter: 0,\r\n  total: 0,\r\n  checkout: false,\r\n};\r\n\r\nconst sumItems = (items) => {\r\n  const itemsCounter = items.reduce(\r\n    (total, product) => total + product.quantity,\r\n    0\r\n  );\r\n  const total = items\r\n    .reduce((total, product) => total + product.price * product.quantity, 0)\r\n    .toFixed(2);\r\n  return { itemsCounter, total };\r\n};\r\n\r\nconst cartReducer = (state, action) => {\r\n  console.log(state);\r\n  switch (action.type) {\r\n    case \"ADD_ITEM\":\r\n      if (!state.selectedItems.find((item) => item.id === action.payload.id)) {\r\n        state.selectedItems.push({\r\n          ...action.payload,\r\n          quantity: 1,\r\n        });\r\n      }\r\n      return {\r\n        ...state,\r\n        selectedItems: [...state.selectedItems],\r\n        ...sumItems(state.selectedItems),\r\n        checkout: false,\r\n      };\r\n    case \"REMOVE_ITEM\":\r\n      const newSelectedItems = state.selectedItems.filter(\r\n        (item) => item.id !== action.payload.id\r\n      );\r\n      return {\r\n        ...state,\r\n        selectedItems: [...newSelectedItems],\r\n        ...sumItems(newSelectedItems),\r\n      };\r\n    case \"INCREASE\":\r\n      const indexI = state.selectedItems.findIndex(\r\n        (item) => item.id === action.payload.id\r\n      );\r\n      state.selectedItems[indexI].quantity++;\r\n      return {\r\n        ...state,\r\n        ...sumItems(state.selectedItems),\r\n      };\r\n    case \"DECREASE\":\r\n      const indexD = state.selectedItems.findIndex(\r\n        (item) => item.id === action.payload.id\r\n      );\r\n      state.selectedItems[indexD].quantity--;\r\n      return {\r\n        ...state,\r\n        ...sumItems(state.selectedItems),\r\n      };\r\n    case \"CHECKOUT\":\r\n      return {\r\n        selectedItems: [],\r\n        itemsCounter: 0,\r\n        total: 0,\r\n        checkout: true,\r\n      };\r\n    case \"CLEAR\":\r\n      return {\r\n        selectedItems: [],\r\n        itemsCounter: 0,\r\n        total: 0,\r\n        checkout: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const CartContext = createContext();\r\n\r\nconst CartContextProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(cartReducer, initialState);\r\n\r\n  return (\r\n    <CartContext.Provider value={{ state, dispatch }}>\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n};\r\n\r\nexport default CartContextProvider;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}